{"version":3,"sources":["webpack:///webpack/bootstrap 1cfc51456fc657437405","webpack:///./block.js"],"names":["__","wp","i18n","blocks","registerBlockType","ImagePlaceholder","BlockControls","MediaUpload","InspectorControls","components","Button","Toolbar","IconButton","RangeControl","ToggleControl","TextControl","title","icon","category","attributes","mediaID","type","mediaURL","source","selector","attribute","containerHeight","default","startPosition","gracefulFailure","failureMessage","edit","isSelected","props","className","console","log","onSelectImage","setAttributes","media","url","id","onChangeContainerHeight","height","Number","onChangeStartPosition","position","onChangeGracefulFailure","onChangeFailureMessage","message","controls","open","save","panoramaStyle"],"mappings":"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","file":"block.build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1cfc51456fc657437405","const { __ } = wp.i18n;\nconst {\n  registerBlockType,\n  ImagePlaceholder,\n  BlockControls,\n  MediaUpload,\n  InspectorControls\n} = wp.blocks;\nconst { Button, Toolbar, IconButton, RangeControl, ToggleControl, TextControl } = wp.components;\n\nregisterBlockType( 'easy-panorama/block', {\n  title: __( 'Panorama' ),\n  icon: 'format-image',\n  category: 'layout',\n  attributes: {\n    mediaID: {\n      type: 'number',\n    },\n    mediaURL: {\n      type: 'string',\n      source: 'attribute',\n      selector: 'img',\n      attribute: 'src',\n    },\n    containerHeight: {\n      type: 'number',\n      default: 400\n    },\n    startPosition: {\n      type: 'number',\n      default: 5\n    },\n    gracefulFailure: {\n      type: 'bool',\n      default: true\n    },\n    failureMessage: {\n      type: 'string',\n      default: __('Scroll left/right to pan through panorama.')\n    }\n  },\n  edit: props => {\n    const { isSelected, attributes, className } = props;\n    console.log(attributes);\n\n    const onSelectImage = media => {\n      props.setAttributes( {\n        mediaURL: media.url,\n        mediaID: media.id,\n      } );\n    };\n\n    const onChangeContainerHeight = (height) => {\n      props.setAttributes( {\n        containerHeight: Number(height)\n      } );\n    };\n\n    const onChangeStartPosition = (position) => {\n      props.setAttributes( {\n        startPosition: position\n      } );\n    };\n\n    const onChangeGracefulFailure = () => {\n      props.setAttributes( {\n        gracefulFailure: !attributes.gracefulFailure\n      } );\n    };\n\n    const onChangeFailureMessage = (message) => {\n      props.setAttributes( {\n        failureMessage: message\n      } );\n    }\n\n    if(!attributes.mediaURL) {\n      return [\n        <ImagePlaceholder\n          className={ className }\n          key=\"easypanorama-placeholder\"\n          icon=\"format-image\"\n          onSelectImage={ onSelectImage}\n        />\n      ]\n    };\n\n    const controls = (\n      isSelected && (\n        <BlockControls key=\"easypanorama-controls\">\n          <Toolbar>\n            <MediaUpload\n              onSelect={ onSelectImage }\n              type=\"image\"\n              value={ this.mediaID }\n              render={ ( { open } ) => (\n                <IconButton\n                  className=\"components-toolbar__control\"\n                  label={ __( 'Edit image' ) }\n                  icon=\"edit\"\n                  onClick={ open }\n                />\n              ) }\n            />\n          </Toolbar>\n        </BlockControls>\n      )\n    );\n\n    return [\n      controls,\n      isSelected && (\n        <InspectorControls key=\"easypanorama-inspector\">\n          <h2>{ __( 'Panorama Settings' ) }</h2>\n          <TextControl\n            label={ __( 'Panorama height' ) }\n            help={ __('Insert the height for this panoramic image container.') }\n            type={ 'number' }\n            value={ attributes.containerHeight }\n            onChange={ onChangeContainerHeight }\n          />\n          <RangeControl\n            label={ __( 'Start position' ) }\n            help={ __( 'Determines the start position of the panorama. Insert a value from 0 (left) to 10 (right).' ) }\n            value={ attributes.startPosition }\n            onChange={ onChangeStartPosition }\n            min={ 0 }\n            max={ 10 }\n          />\n          <ToggleControl\n            label={ __('Insert failure message') }\n            checked={ attributes.gracefulFailure }\n            onChange={ onChangeGracefulFailure }\n          />\n          <TextControl\n            label={ __( 'Failure message' ) }\n            help={ __('This message will appear in mobile devices with no gyroscopic data or no physical orientation support.') }\n            value={ attributes.failureMessage }\n            onChange={ onChangeFailureMessage }\n          />\n        </InspectorControls>\n      ),\n      <div className={ className }>\n        <div className=\"panorama-image\">\n            <img src={ attributes.mediaURL } />\n        </div>\n      </div>\n    ];\n  },\n  save: props => {\n    const {\n      className,\n      attributes: {\n        mediaURL\n      }\n    } = props;\n\n    const panoramaStyle = {\n      height: '400px'\n    };\n\n    return (\n      <div className={ className }>\n        {\n          mediaURL && (\n            <div className=\"easy-panorama\" style={panoramaStyle}>\n              <img className=\"easy-panorama-image\" src={ mediaURL } />\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n} );\n\n\n\n// WEBPACK FOOTER //\n// ./block.js"],"sourceRoot":""}