{"version":3,"sources":["webpack:///webpack/bootstrap c45fd54df20356118f72","webpack:///./scripts/block.js"],"names":["__","wp","i18n","blocks","registerBlockType","ImagePlaceholder","BlockControls","MediaUpload","InspectorControls","createBlock","components","Button","Toolbar","IconButton","RangeControl","ToggleControl","TextControl","PanelBody","Dashicon","Tooltip","title","icon","category","attributes","mediaID","type","mediaURL","source","selector","attribute","mediaAlt","mediaTitle","containerHeight","default","startPosition","gracefulFailure","failureMessage","displayMeta","supports","html","edit","isSelected","props","className","onSelectImage","setAttributes","media","url","id","alt","panoramaStyle","height","onChangeMediaAlt","onChangeMediaTitle","onChangeContainerHeight","Number","adjustStartPosition","position","onChangeStartPosition","onChangeGracefulFailure","onChangeFailureMessage","message","onChangeDisplayMeta","controls","open","save"],"mappings":"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","file":"block.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c45fd54df20356118f72","const { __ } = wp.i18n;\nconst {\n  registerBlockType,\n  ImagePlaceholder,\n  BlockControls,\n  MediaUpload,\n  InspectorControls,\n  createBlock\n} = wp.blocks;\nconst {\n  Button,\n  Toolbar,\n  IconButton,\n  RangeControl,\n  ToggleControl,\n  TextControl,\n  PanelBody,\n  Dashicon,\n  Tooltip,\n} = wp.components;\n\nregisterBlockType( 'easy-panorama/block', {\n  title: __( 'Panorama' ),\n  icon: 'format-image',\n  category: 'layout',\n  attributes: {\n    mediaID: {\n      type: 'number',\n    },\n    mediaURL: {\n      type: 'string',\n      source: 'attribute',\n      selector: 'img',\n      attribute: 'src',\n    },\n    mediaAlt: {\n      type: 'string',\n      source: 'attribute',\n      selector: 'img',\n      attribute: 'alt',\n    },\n    mediaTitle: {\n      type: 'string',\n      source: 'attribute',\n      selector: 'img',\n      attribute: 'title',\n    },\n    containerHeight: {\n      type: 'number',\n      default: 400\n    },\n    startPosition: {\n      type: 'number',\n      default: 5\n    },\n    gracefulFailure: {\n      type: 'bool',\n      default: true\n    },\n    failureMessage: {\n      type: 'string',\n      default: __('Scroll left/right to pan through panorama.')\n    },\n    displayMeta: {\n      type: 'bool',\n      default: false\n    }\n  },\n  supports: {\n    html: false\n  },\n\n  edit: props => {\n    const {\n      isSelected,\n      className,\n      attributes: {\n        mediaURL,\n        mediaID,\n        mediaAlt,\n        mediaTitle,\n        containerHeight,\n        startPosition,\n        gracefulFailure,\n        failureMessage,\n        displayMeta\n      }\n    } = props;\n\n    const onSelectImage = media => {\n      props.setAttributes( {\n        mediaURL: media.url,\n        mediaID: media.id,\n        mediaAlt: media.alt,\n        mediaTitle: media.title\n      } );\n    };\n\n    const panoramaStyle = {\n      height: containerHeight + 'px'\n    };\n\n    const onChangeMediaAlt = (alt) => {\n      props.setAttributes( {\n        mediaAlt: alt\n      } );\n    };\n\n    const onChangeMediaTitle = (title) => {\n      props.setAttributes( {\n        mediaTitle: title\n      } );\n    };\n\n    const onChangeContainerHeight = (height) => {\n      props.setAttributes( {\n        containerHeight: Number(height)\n      } );\n    };\n\n    const adjustStartPosition = (position) => {\n      return position / 10;\n    };\n\n    const onChangeStartPosition = (position) => {\n      props.setAttributes( {\n        startPosition: position\n      } );\n    };\n\n    const onChangeGracefulFailure = () => {\n      props.setAttributes( {\n        gracefulFailure: !gracefulFailure\n      } );\n    };\n\n    const onChangeFailureMessage = (message) => {\n      props.setAttributes( {\n        failureMessage: message\n      } );\n    }\n\n    const onChangeDisplayMeta = () => {\n      props.setAttributes( {\n        displayMeta: !displayMeta\n      } );\n    }\n\n    if(!mediaURL) {\n      return [\n        <ImagePlaceholder\n          icon=\"format-image\"\n          label={ __( 'Panorama' ) }\n          className={ className }\n          key=\"easypanorama-placeholder\"\n          onSelectImage={ onSelectImage}\n        />\n      ]\n    };\n\n    const controls = (\n      isSelected && (\n        <BlockControls key=\"easypanorama-controls\">\n          <Toolbar>\n            <MediaUpload\n              onSelect={ onSelectImage }\n              type=\"image\"\n              value={ this.mediaID }\n              render={ ( { open } ) => (\n                <IconButton\n                  className=\"components-toolbar__control\"\n                  label={ __( 'Edit image' ) }\n                  icon=\"edit\"\n                  onClick={ open }\n                />\n              ) }\n            />\n          </Toolbar>\n        </BlockControls>\n      )\n    );\n\n    return [\n      controls,\n      isSelected && (\n        <InspectorControls key=\"easypanorama-inspector\">\n          <PanelBody title={ __( 'Panorama Settings' ) }>\n            <TextControl\n              label={ __( 'Panorama height' ) }\n              help={ __('Insert the height for this panoramic image container.') }\n              type={ 'number' }\n              value={ containerHeight }\n              onChange={ onChangeContainerHeight }\n            />\n            <RangeControl\n              label={ __( 'Start position' ) }\n              help={ __( 'Determines the start position of the panorama. Insert a value from 0 (left) to 10 (right).' ) }\n              value={ startPosition }\n              onChange={ onChangeStartPosition }\n              min={ 0 }\n              max={ 10 }\n            />\n            <ToggleControl\n              label={ __('Show alt/title meta on overlay') }\n              checked={ displayMeta }\n              onChange={ onChangeDisplayMeta }\n            />\n            { displayMeta && (\n              <TextControl\n                label={ __( 'Title' ) }\n                help={ __('Give a title to this image, it will be displayed over the image. This is the alt meta of the image.') }\n                value={ mediaAlt }\n                onChange={ onChangeMediaAlt }\n              />\n            )}\n            { displayMeta && (\n              <TextControl\n                label={ __( 'Description' ) }\n                help={ __('Give a description to this image, it will be displayed over the image. This is the title meta of the image.') }\n                value={ mediaTitle }\n                onChange={ onChangeMediaTitle }\n              />\n            )}\n          </PanelBody>\n          <PanelBody title={ __('Advanced Settings')}>\n            <ToggleControl\n              label={ __('Insert failure message') }\n              checked={ gracefulFailure }\n              onChange={ onChangeGracefulFailure }\n            />\n            { gracefulFailure && (\n               <TextControl\n                label={ __( 'Failure message' ) }\n                help={ __('This message will appear in mobile devices with no gyroscopic data or no physical orientation support.') }\n                value={ failureMessage }\n                onChange={ onChangeFailureMessage }\n              />\n            )}\n          </PanelBody>\n        </InspectorControls>\n      ),\n      <div className={ className }>\n        <div style={panoramaStyle} className=\"panorama--image\">\n          <img src={ mediaURL } alt={ mediaAlt } title={ mediaTitle } />\n        </div>\n        <span className=\"panorama--help-text\">\n          <Tooltip text={ __( 'This is a preview, some features are not available.' ) }>\n            <span className=\"panorama--help-icon\">\n              <Dashicon size=\"25\" icon=\"info\" />\n            </span>\n          </Tooltip>\n        </span>\n      </div>\n    ];\n  },\n  save: props => {\n    const {\n      className,\n      attributes: {\n        mediaURL,\n        mediaAlt,\n        mediaTitle,\n        containerHeight,\n        startPosition,\n        gracefulFailure,\n        failureMessage,\n        displayMeta\n      }\n    } = props;\n\n    const panoramaStyle = {\n      height: containerHeight + 'px'\n    };\n\n    const adjustStartPosition = (position) => {\n      return position / 10;\n    };\n\n    return (\n      <div className={ className }>\n        {\n          mediaURL && (\n            <figure>\n              <div className=\"easy-panorama\" data-start-position={adjustStartPosition(startPosition)} data-graceful-failure={gracefulFailure} data-failure-message={failureMessage} style={panoramaStyle} data-meta={displayMeta}>\n                <img className=\"easy-panorama-image\" src={ mediaURL } alt={ mediaAlt } title={ mediaTitle } />\n              </div>\n            </figure>\n          )\n        }\n      </div>\n    );\n  }\n} );\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/block.js"],"sourceRoot":""}